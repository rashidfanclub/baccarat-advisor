<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>バカラ戦略アドバイザー</title>
    
    <!-- PWA設定 -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#1b2c3e">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="バカラアドバイザー">
    
    <!-- 外部CSS -->
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- PWA Install Prompt -->
    <div id="installPrompt" class="install-prompt hidden">
        <span>📱 ホーム画面にアプリを追加</span>
        <button id="installBtn">インストール</button>
        <button class="close-btn" id="closeInstall">×</button>
    </div>

    <!-- Pause/Session End Overlay -->
    <div id="pauseOverlay" class="pause-overlay hidden">
        <div class="pause-content">
            <h2>⏸️ 一時停止中</h2>
            <p>リスク管理により取引が一時停止されています</p>
            <button class="resume-btn" id="resumeBtn">▶️ 再開</button>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="settings-modal hidden">
        <div class="settings-content">
            <h3 class="settings-title">⚙️ 設定</h3>
            
            <div class="settings-section">
                <div class="section-title">
                    <span>🌍</span>
                    <span id="languageSectionTitle">言語設定</span>
                </div>
                <div class="input-group">
                    <label class="input-label" id="languageLabel">言語</label>
                    <select id="languageSelect" class="select-field">
                        <option value="ja">日本語</option>
                        <option value="en">English</option>
                        <option value="es">Español</option>
                        <option value="zh">中文</option>
                        <option value="ko">한국어</option>
                        <option value="fr">Français</option>
                    </select>
                </div>
            </div>
            
            <div class="settings-section">
                <div class="section-title">
                    <span>💰</span>
                    <span id="fundsSectionTitle">資金設定</span>
                </div>
                <div class="input-group">
                    <label class="input-label" id="initialFundsLabel">初期資金</label>
                    <input type="number" id="initialFundsInput" class="input-field" value="100000" min="1000" step="1000">
                </div>
            </div>
            
            <div class="settings-section">
                <div class="section-title">
                    <span>🎯</span>
                    <span id="strategySectionTitle">戦略設定</span>
                </div>
                <div class="input-group">
                    <label class="input-label" id="verificationCountLabel">パターン検証回数</label>
                    <input type="number" id="verificationCountInput" class="input-field" value="4" min="1" max="10">
                </div>
            </div>
            
            <div class="settings-section">
                <div class="section-title">
                    <span>🛡️</span>
                    <span id="riskSectionTitle">リスク管理</span>
                </div>
                <div class="input-group">
                    <label class="input-label" id="lossLimitPercentLabel">損失限度 (%)</label>
                    <div class="enhanced-slider-container">
                        <input type="range" id="lossLimitSlider" class="enhanced-slider" min="0" max="100" value="20" step="1">
                        <div class="slider-value-popup" id="sliderValuePopup">20%</div>
                    </div>
                    <div class="slider-labels">
                        <span>0% (無制限)</span>
                        <span id="currentLossLimitPercent">20%</span>
                        <span>100%</span>
                    </div>
                    <div class="current-limit-display" id="currentLimitDisplay">
                        損失限度: ¥20,000 (20%)
                    </div>
                </div>
            </div>
            
            <div class="settings-buttons-grid">
                <button id="applySettings" class="settings-btn btn-apply">
                    <span>✅</span>
                    <span id="applyText">適用</span>
                </button>
                <button id="cancelSettings" class="settings-btn btn-cancel">
                    <span>❌</span>
                    <span id="cancelText">キャンセル</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Header -->
    <div class="header">
        <div class="header-content">
            <div style="display: flex; align-items: center; gap: 15px;">
                <h1 class="title" id="appTitle">バカラ戦略アドバイザー</h1>
                <div class="language-selector">
                    <div class="current-lang">
                        <span>🌍</span>
                        <span id="currentLang">日本語</span>
                    </div>
                </div>
                <button class="settings-button" id="settingsBtn">⚙️</button>
            </div>
            <div class="funds-display">
                <span>💰</span>
                <span id="currentFundsLabel">現在の資金:</span>
                <span class="funds-amount" id="fundsAmount">¥100,000</span>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="container">
        <div class="main-content">
            <!-- Left Panel -->
            <div>
                <!-- Quick Input Component Container -->
                <div id="quickInputComponent"></div>
                
                <!-- Risk Management Component Container -->
                <div id="riskManagementComponent"></div>

                <!-- Bet Suggestion Component Container -->
                <div id="betSuggestionComponent"></div>

                <!-- Status Component Container -->
                <div id="statusComponent"></div>

                <!-- Reset Button -->
                <button class="button" id="resetBtn" style="background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); box-shadow: 0 4px 15px rgba(239, 68, 68, 0.4);">
                    <span>🔄</span>
                    <span id="resetText">全データリセット</span>
                </button>
            </div>

            <!-- Right Panel -->
            <div>
                <!-- Chart Component Container -->
                <div id="chartComponent"></div>

                <!-- History Component Container -->
                <div id="historyComponent"></div>
            </div>
        </div>
    </div>

    <!-- モジュールスクリプトの読み込み（順序が重要） -->
    <script src="js/translations.js"></script>
    <script src="js/state.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/components.js"></script>
    <script src="js/gameLogic.js"></script>
    <script src="js/riskManagement.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/app.js"></script>
</body>
</html>